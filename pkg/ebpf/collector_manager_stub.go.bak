//go:build !linux || !ebpf
// +build !linux !ebpf

package ebpf

import (
	"context"
	"fmt"

	"github.com/yairfalse/tapio/pkg/collectors"
)

// CollectorManager manages eBPF collectors (stub for non-Linux)
type CollectorManager struct{}

// NewCollectorManager creates a new collector manager
func NewCollectorManager() *CollectorManager {
	return &CollectorManager{}
}

// RegisterCollector is a no-op on non-Linux
func (cm *CollectorManager) RegisterCollector(name string, collector collectors.Collector) error {
	return fmt.Errorf("eBPF collector manager is only supported on Linux")
}

// Start is a no-op on non-Linux
func (cm *CollectorManager) Start(ctx context.Context) error {
	return fmt.Errorf("eBPF collector manager is only supported on Linux")
}

// Stop is a no-op on non-Linux
func (cm *CollectorManager) Stop() error {
	return nil
}

// GetCollector returns nil on non-Linux
func (cm *CollectorManager) GetCollector(name string) (collectors.Collector, bool) {
	return nil, false
}

// InitializeDefaultCollectors is a no-op on non-Linux
func (cm *CollectorManager) InitializeDefaultCollectors(config *Config) error {
	return fmt.Errorf("eBPF collector manager is only supported on Linux")
}